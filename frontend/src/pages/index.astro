---
import Layout from "../layouts/Layout.astro";
import CodingSwitch from "../components/codingSwitch";
import "../styles/global.css";
---

<Layout>
  <div
    class="rounded-2xl bg-gray-700 w-5/6 min-h-1/6 md:w-1/6 md:min-h-2/3 drop-shadow-2xl m-3 flex flex-row md:flex-col overflow-auto"
  >
    <!-- "encoding" selection -->
    <button
      id="setBinary"
      class="text-white font-bold bg-blue-500 m-5 p-2 md:p-5 rounded-2xl cursor-pointer hover:bg-blue-800 transition"
      >Binary-Shrimp</button
    >
    <button
      id="setQR"
      class="text-white font-bold bg-blue-500 m-5 p-2 md:p-5 rounded-2xl cursor-pointer hover:bg-blue-800 transition"
      >QR-Shrimp</button
    >
    <button
      id="setMorse"
      class="text-white font-bold bg-blue-500 m-5 p-2 md:p-5 rounded-2xl cursor-pointer hover:bg-blue-800 transition"
      >Morshrimp</button
    >
    <button
      class="text-white font-bold bg-blue-500 m-5 p-2 md:p-5 rounded-2xl cursor-pointer hover:bg-blue-800 transition"
      >Shrimp 4</button
    >
    <button
      class="text-white font-bold bg-blue-500 m-5 p-2 md:p-5 rounded-2xl cursor-pointer hover:bg-blue-800 transition"
      >Shrimp 5</button
    >
    <button
      class="text-white font-bold bg-blue-500 m-5 p-2 md:p-5 rounded-2xl cursor-pointer hover:bg-blue-800 transition"
      >Shrimp 5</button
    >
  </div>
  <div
    class="rounded-2xl bg-gray-700 w-5/6 md:w-2/3 h-fit min-h-2/3 md:h-2/3 drop-shadow-2xl m-3 flex flex-col"
  >
    <CodingSwitch client:load />
  </div>
  <script>
    import { encoding } from "../store.js";

    let binBtn = document.getElementById("setBinary");
    let qrBtn = document.getElementById("setQR");
    let morBtn = document.getElementById("setMorse");

    function setBinary() {
      encoding.set("binary");

      if (!binBtn?.classList.contains("bg-blue-700")) {
        binBtn?.classList.remove("bg-blue-500");
        binBtn?.classList.add("bg-blue-700");

        if (qrBtn?.classList.contains("bg-blue-700")) {
          qrBtn?.classList.remove("bg-blue-700");
          qrBtn?.classList.add("bg-blue-500");
        } else if (morBtn?.classList.contains("bg-blue-700")) {
          morBtn?.classList.remove("bg-blue-700");
          morBtn?.classList.add("bg-blue-500");
        }
      }
    }
    binBtn?.addEventListener("click", setBinary);

    function setQR() {
      encoding.set("qr");

      if (!qrBtn?.classList.contains("bg-blue-700")) {
        qrBtn?.classList.remove("bg-blue-500");
        qrBtn?.classList.add("bg-blue-700");

        if (binBtn?.classList.contains("bg-blue-700")) {
          binBtn?.classList.remove("bg-blue-700");
          binBtn?.classList.add("bg-blue-500");
        } else if (morBtn?.classList.contains("bg-blue-700")) {
          morBtn?.classList.remove("bg-blue-700");
          morBtn?.classList.add("bg-blue-500");
        }
      }
    }
    qrBtn?.addEventListener("click", setQR);

    function setMorse() {
      encoding.set("morse");

      if (!morBtn?.classList.contains("bg-blue-700")) {
        morBtn?.classList.remove("bg-blue-500");
        morBtn?.classList.add("bg-blue-700");

        if (qrBtn?.classList.contains("bg-blue-700")) {
          qrBtn?.classList.remove("bg-blue-700");
          qrBtn?.classList.add("bg-blue-500");
        } else if (binBtn?.classList.contains("bg-blue-700")) {
          binBtn?.classList.remove("bg-blue-700");
          binBtn?.classList.add("bg-blue-500");
        }
      }
    }
    morBtn?.addEventListener("click", setMorse);
  </script>
</Layout>
