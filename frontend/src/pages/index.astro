---
import Layout from "../layouts/Layout.astro";
import CodingSwitch from "../components/codingSwitch";
import "../styles/global.css";
---

<Layout>
  <div
    class="rounded-2xl bg-gray-700 w-5/6 min-h-1/6 md:w-1/6 md:min-h-2/3 drop-shadow-2xl m-3 flex flex-row md:flex-col overflow-auto"
  >
    <!-- "encoding" selection -->
    <button
      id="setBinary"
      class="text-white font-bold bg-blue-500 m-5 p-2 md:p-5 rounded-2xl cursor-pointer hover:bg-blue-800 transition"
      >Binary-Shrimp</button
    >
    <button
      id="setQR"
      class="text-white font-bold bg-blue-500 m-5 p-2 md:p-5 rounded-2xl cursor-pointer hover:bg-blue-800 transition"
      >QR-Shrimp</button
    >
    <button
      id="setMorse"
      class="text-white font-bold bg-blue-500 m-5 p-2 md:p-5 rounded-2xl cursor-pointer hover:bg-blue-800 transition"
      >Morsehrimp</button
    >
    <button
      id="setBase"
      class="text-white font-bold bg-blue-500 m-5 p-2 md:p-5 rounded-2xl cursor-pointer hover:bg-blue-800 transition"
      >BasedShrimp</button
    >
  </div>
  <div
    class="rounded-2xl bg-gray-700 w-5/6 md:w-2/3 h-fit min-h-2/3 md:h-2/3 drop-shadow-2xl m-3 flex flex-col"
  >
    <CodingSwitch client:load />
  </div>
  <script>
    import { encoding } from "../store.js";

    const buttons = {
      binary: document.getElementById("setBinary"),
      qr: document.getElementById("setQR"),
      morse: document.getElementById("setMorse"),
      base: document.getElementById("setBase"),
    };

    function setEncoding(type: string) {
      encoding.set(type);

      Object.entries(buttons).forEach(([btnType, btn]) => {
        if (btnType === type) {
          btn?.classList.remove("bg-blue-500");
          btn?.classList.add("bg-blue-700");
        } else {
          btn?.classList.remove("bg-blue-700");
          btn?.classList.add("bg-blue-500");
        }
      });
    }

    Object.entries(buttons).forEach(([type, btn]) => {
      btn?.addEventListener("click", () => setEncoding(type));
    });
  </script>
</Layout>
